{"id": "trace-11efq1", "title": "Update documentation for new list default behavior", "description": "Update all documentation to reflect that trc list now defaults to showing backlog (open, in_progress, blocked) and supports multiple --status flags. Need to update CLI design docs, quickstart guide, AI agent guide, and any other relevant docs.", "status": "closed", "priority": 2, "created_at": "2025-11-18T14:25:23.236754Z", "updated_at": "2025-11-18T14:30:31.681839Z", "closed_at": "2025-11-18T14:30:31.681839Z", "dependencies": []}
{"id": "trace-11mmza", "title": "Test batch 1", "description": "", "status": "closed", "priority": 2, "created_at": "2025-11-30T23:46:39.368711Z", "updated_at": "2025-11-30T23:46:52.638088Z", "closed_at": "2025-11-30T23:46:52.638088Z", "dependencies": []}
{"id": "trace-11v9uy", "title": "Update all code references to use new project_id system", "description": "Update all functions that use project_id: create_issue(), sync_project(), CLI commands, etc. Ensure they work with both remote URLs and local paths. Update project lookups to handle name collisions (pick first match for now - YAGNI).", "status": "closed", "priority": 0, "created_at": "2025-11-30T16:16:45.483240Z", "updated_at": "2025-11-30T16:40:59.897404Z", "closed_at": "2025-11-30T16:40:59.897404Z", "dependencies": [{"depends_on_id": "trace-t2yxk3", "type": "parent"}]}
{"id": "trace-12b0cz", "title": "Update trc guide command output", "description": "Update the guide() function in trc_main.py (lines 1863-1936) to reflect new list behavior in the AI agent integration guide text.", "status": "closed", "priority": 2, "created_at": "2025-11-18T14:25:42.862278Z", "updated_at": "2025-11-18T14:29:28.482419Z", "closed_at": "2025-11-18T14:29:28.482419Z", "dependencies": [{"depends_on_id": "trace-11efq1", "type": "parent"}]}
{"id": "trace-133mzu", "title": "Update cli-design.md for new list behavior", "description": "Update docs/cli-design.md to document: (1) trc list now defaults to backlog [open, in_progress, blocked], (2) --status flag can be specified multiple times, (3) --status any shows all statuses including closed. Update command reference and examples.", "status": "closed", "priority": 2, "created_at": "2025-11-18T14:25:42.502325Z", "updated_at": "2025-11-18T14:28:28.440485Z", "closed_at": "2025-11-18T14:28:28.440485Z", "dependencies": [{"depends_on_id": "trace-11efq1", "type": "parent"}]}
{"id": "trace-151sj8", "title": "Update detect_project() to use git remote URL as project_id", "description": "Modify detect_project() to return git remote URL (e.g., github.com/user/repo) as the project_id instead of absolute path. Fall back to absolute path for repos without remotes. Extract project name from URL or directory name.", "status": "closed", "priority": 0, "created_at": "2025-11-30T16:16:45.016230Z", "updated_at": "2025-11-30T16:27:51.822765Z", "closed_at": "2025-11-30T16:27:51.822765Z", "dependencies": [{"depends_on_id": "trace-t2yxk3", "type": "parent"}]}
{"id": "trace-15iqup", "title": "Add batch close operation for multiple issues", "description": "Support closing multiple issues in one command: trc close ID1 ID2 ID3. Currently must close one at a time which is tedious for AI agents completing multiple tasks.", "status": "closed", "priority": 1, "created_at": "2025-11-30T15:31:07.600401Z", "updated_at": "2025-11-30T23:46:58.928572Z", "closed_at": "2025-11-30T23:46:58.928572Z", "dependencies": [{"depends_on_id": "trace-64rf5b", "type": "parent"}]}
{"id": "trace-16so9a", "title": "Fix transaction safety for DB and JSONL writes", "description": "BUG: Partial writes to global DB even when JSONL fails. Should rollback DB changes or complete both atomically. Need proper transaction handling to prevent inconsistent state.\n\nREPRODUCTION STEPS:\n1. User does NOT run 'trc init' first\n2. JSONL file (.trace/issues.jsonl) does not exist\n3. User runs 'trc create' command\n4. Issue gets created in central DB successfully\n5. JSONL export fails (because .trace directory doesn't exist)\n6. Result: DB has the issue, JSONL doesn't - data inconsistency\n\nROOT CAUSE: Commands don't check if project is initialized before modifying DB. DB writes succeed, JSONL writes fail, no rollback.\n\nFIX APPROACH:\n- Either: Check for .trace/issues.jsonl existence before DB operations\n- Or: Wrap DB + JSONL in transaction, rollback DB if JSONL fails\n- Or: Create .trace directory automatically before JSONL export\n- Best: Validate initialization upfront and fail fast with helpful error", "status": "closed", "priority": 0, "created_at": "2025-11-30T15:31:07.903057Z", "updated_at": "2025-11-30T23:36:44.903584Z", "closed_at": "2025-11-30T23:36:44.903584Z", "dependencies": [{"depends_on_id": "trace-64rf5b", "type": "parent"}]}
{"id": "trace-17tmdu", "title": "Update CLAUDE.md default behaviors section", "description": "Update CLAUDE.md 'Default Behaviors' section to document new trc list behavior. Update the bullet point about trc list to clarify backlog default and multi-status support.", "status": "closed", "priority": 2, "created_at": "2025-11-18T14:25:43.109955Z", "updated_at": "2025-11-18T14:29:49.719341Z", "closed_at": "2025-11-18T14:29:49.719341Z", "dependencies": [{"depends_on_id": "trace-11efq1", "type": "parent"}]}
{"id": "trace-17xlxu", "title": "Add --project flag to 'trc create' command", "description": "The 'trc create' command doesn't have a --project flag to specify which project an issue should be created in. Currently users must either cd to the project directory or create the issue and then use 'trc move'. Expected usage: 'trc create \"title\" --description \"...\" --project /path/to/project' or 'trc create \"title\" --description \"...\" --project project-name'. This would streamline cross-project issue creation. Discovered when trying to create trace documentation issue from knowledge-organization-framework project.", "status": "closed", "priority": 2, "created_at": "2025-11-18T02:10:40.218011Z", "updated_at": "2025-11-18T02:48:34.383288Z", "closed_at": "2025-11-18T02:48:34.383288Z", "dependencies": []}
{"id": "trace-197nsf", "title": "Add priority text values (high/critical/low)", "description": "YAGNI - Not implementing. Numeric priorities (0-4) are sufficient for now.", "status": "closed", "priority": 3, "created_at": "2025-11-30T15:31:08.213192Z", "updated_at": "2025-12-01T01:41:30.149828Z", "closed_at": "2025-12-01T01:41:30.149828Z", "dependencies": [{"depends_on_id": "trace-64rf5b", "type": "parent"}]}
{"id": "trace-1bbnww", "title": "Implement auto-merge logic for identifier changes", "description": "Detect when project_id changes for same directory (e.g., local path \u2192 remote URL when user adds remote, or remote URL changes). Automatically merge old project into new project, updating all issue references.", "status": "closed", "priority": 0, "created_at": "2025-11-30T16:16:45.364949Z", "updated_at": "2025-11-30T19:37:05.857403Z", "closed_at": "2025-11-30T19:37:05.857403Z", "dependencies": [{"depends_on_id": "trace-t2yxk3", "type": "parent"}]}
{"id": "trace-1d5uth", "title": "Fix trc list to show backlog by default (exclude closed)", "description": "Currently trc list with no --status flag shows ALL issues including closed. Should default to showing backlog: open + in_progress + blocked (everything except closed).\n\nImplementation approach:\n1. Update list_issues() to support multiple statuses (accept Optional[str | list[str]] and use SQL IN clause)\n2. Update list CLI command to accept multiple --status flags (e.g., trc list --status open --status in_progress)\n3. Default behavior when no --status provided: show ['open', 'in_progress', 'blocked']\n4. Keep --status any to mean 'show all statuses'\n5. Write tests for multi-status behavior\n6. Verify all existing tests still pass\n\nThis aligns with mental model: trc list = backlog, trc ready = actionable work, trc list --status closed = done.", "status": "closed", "priority": 2, "created_at": "2025-11-18T14:13:29.742968Z", "updated_at": "2025-11-18T14:23:56.206121Z", "closed_at": "2025-11-18T14:23:56.206121Z", "dependencies": []}
{"id": "trace-1f0fvk", "title": "Write test for list --project filtering", "description": "Write test that verifies 'trc list --project <name>' filters to that specific project when run from a different project directory. Test should fail initially, then pass after implementation.", "status": "closed", "priority": 2, "created_at": "2025-11-30T19:54:14.111810Z", "updated_at": "2025-11-30T19:55:04.841628Z", "closed_at": "2025-11-30T19:55:04.841628Z", "dependencies": [{"depends_on_id": "trace-1toxy1", "type": "parent"}]}
{"id": "trace-1f62s8", "title": "Update ai-agent-guide.md for new list behavior", "description": "Update docs/ai-agent-guide.md to document new list defaults and multi-status support. Ensure AI agents understand: trc list = backlog, trc list --status any = everything, multiple --status flags supported.", "status": "closed", "priority": 2, "created_at": "2025-11-18T14:25:42.740467Z", "updated_at": "2025-11-18T14:30:31.569158Z", "closed_at": "2025-11-18T14:30:31.569158Z", "dependencies": [{"depends_on_id": "trace-11efq1", "type": "parent"}]}
{"id": "trace-1h6l1d", "title": "Fix ready command --project flag filtering", "description": "Apply same three-way logic fix to ready command as was done for list command", "status": "closed", "priority": 2, "created_at": "2025-11-30T19:54:14.352008Z", "updated_at": "2025-11-30T19:55:40.270280Z", "closed_at": "2025-11-30T19:55:40.270280Z", "dependencies": [{"depends_on_id": "trace-1toxy1", "type": "parent"}]}
{"id": "trace-1j0gin", "title": "Add or document dependency removal command", "description": "Nice-to-have: Need trc remove-dependency command (may exist but not documented in guide). Currently no clear way to remove dependencies between issues.", "status": "closed", "priority": 3, "created_at": "2025-11-30T15:31:08.694986Z", "updated_at": "2025-11-30T15:47:15.656985Z", "closed_at": "2025-11-30T15:47:15.656985Z", "dependencies": [{"depends_on_id": "trace-64rf5b", "type": "parent"}]}
{"id": "trace-1lwb01", "title": "Test issue with name flag", "description": "Testing name-based project resolution", "status": "closed", "priority": 2, "created_at": "2025-11-30T23:13:22.737691Z", "updated_at": "2025-11-30T23:13:31.393552Z", "closed_at": null, "dependencies": []}
{"id": "trace-1lz9ob", "title": "Review and clean up README content", "description": "Review the README and clean up lines that could be improved. Some sections may be verbose or unclear. Focus on making it more concise and reader-friendly.", "status": "closed", "priority": 2, "created_at": "2025-11-18T02:20:08.820766Z", "updated_at": "2025-11-18T02:26:24.583140Z", "closed_at": "2025-11-18T02:26:24.583140Z", "dependencies": []}
{"id": "trace-1m3w81", "title": "Show dependencies and dependents in tree view", "description": "YAGNI - Not implementing. Current tree view is sufficient for now.", "status": "closed", "priority": 3, "created_at": "2025-11-30T15:31:08.376428Z", "updated_at": "2025-12-01T01:41:30.150542Z", "closed_at": "2025-12-01T01:41:30.150542Z", "dependencies": [{"depends_on_id": "trace-64rf5b", "type": "parent"}]}
{"id": "trace-1md7ua", "title": "Test issue with path flag", "description": "Testing path-based project resolution", "status": "closed", "priority": 2, "created_at": "2025-11-30T23:13:18.081858Z", "updated_at": "2025-11-30T23:13:31.340302Z", "closed_at": null, "dependencies": []}
{"id": "trace-1mmpb4", "title": "Update quickstart.md for new list behavior", "description": "Update docs/quickstart.md to reflect new default behavior in getting started examples. Ensure examples show backlog by default, mention --status closed for viewing completed work.", "status": "closed", "priority": 2, "created_at": "2025-11-18T14:25:42.620415Z", "updated_at": "2025-11-18T14:28:55.421103Z", "closed_at": "2025-11-18T14:28:55.421103Z", "dependencies": [{"depends_on_id": "trace-11efq1", "type": "parent"}]}
{"id": "trace-1otw58", "title": "Fix list command --project flag filtering", "description": "Implement three-way logic in list_cmd: (1) project is None -> current dir, (2) project == 'any' -> all projects, (3) project == <name> -> look up and filter by that project", "status": "closed", "priority": 2, "created_at": "2025-11-30T19:54:14.231752Z", "updated_at": "2025-11-30T19:55:40.156547Z", "closed_at": "2025-11-30T19:55:40.156547Z", "dependencies": [{"depends_on_id": "trace-1toxy1", "type": "parent"}]}
{"id": "trace-1pgw17", "title": "Verify all existing tests pass", "description": "Run full test suite to ensure no regressions from multi-status changes", "status": "closed", "priority": 2, "created_at": "2025-11-18T14:20:23.516157Z", "updated_at": "2025-11-18T14:23:56.102152Z", "closed_at": "2025-11-18T14:23:56.102152Z", "dependencies": [{"depends_on_id": "trace-1d5uth", "type": "parent"}]}
{"id": "trace-1tlb0r", "title": "Add 'trc update' command to guide documentation", "description": "The 'trc guide' output doesn't mention the 'trc update' command, which allows updating title, description, priority, and status of existing issues. Users may not discover this capability and resort to closing/recreating issues instead. Add to guide: 'trc update <id> --title \"...\" --description \"...\" --priority N --status X - Update existing issue'. Discovered when AI agent tried to close/recreate instead of updating issue knowledge-organization-framework-4apcmt to add Morality to scope.", "status": "closed", "priority": 2, "created_at": "2025-11-18T02:06:27.741217Z", "updated_at": "2025-11-18T02:30:27.242997Z", "closed_at": "2025-11-18T02:30:27.242997Z", "dependencies": []}
{"id": "trace-1toxy1", "title": "Fix --project flag not filtering correctly", "description": "## Root Cause Analysis\n\n**The Bug:** The `--project` flag is completely ignored except when it equals 'any'.\n\n### How It Currently Works\n\nIn `trc_main.py:1510-1569` (list_cmd), the logic is:\n\n```python\n# Handle --project flag\nif project == \"any\":\n    # List all issues across all projects\n    issues = list_issues(db, status=status_filter)\nelse:\n    # List issues for current project\n    current_project = detect_project()\n    # ...\n    issues = list_issues(db, project_id=current_project[\"id\"], status=status_filter)\n```\n\n**Problem:** The `else` branch handles BOTH cases:\n- When `project` is `None` (no flag provided) \u2192 uses current project \u2713\n- When `project` is a specific value like \"trace\" \u2192 STILL uses current project \u2717\n\nSo `trc list --project trace` from ynab-budget directory:\n1. Checks if project == \"any\" \u2192 NO\n2. Falls into else branch\n3. Calls detect_project() \u2192 finds ynab-budget (current dir)\n4. Shows ynab-budget issues (WRONG!)\n\n### Expected Behavior\n\nShould have THREE cases:\n1. `project is None` \u2192 use current project\n2. `project == \"any\"` \u2192 show all projects  \n3. `project == <specific-name>` \u2192 look up that project in registry and filter by it\n\n### The Fix\n\n```python\n# Handle --project flag\nif project == \"any\":\n    # List all issues across all projects\n    issues = list_issues(db, status=status_filter)\nelif project is not None:\n    # Look up specific project by name (or path)\n    cursor = db.execute(\n        \"SELECT id, name, current_path FROM projects WHERE name = ?\",\n        (project,)\n    )\n    row = cursor.fetchone()\n    if row is None:\n        print(f\"Error: Project '{project}' not found in registry\")\n        print(\"Hint: Run 'trc list --project any' to see all projects\")\n        db.close()\n        raise typer.Exit(code=1)\n    \n    target_project = {\"id\": row[0], \"name\": row[1], \"path\": row[2]}\n    sync_project(db, target_project[\"path\"])\n    issues = list_issues(db, project_id=target_project[\"id\"], status=status_filter)\nelse:\n    # No --project flag, use current directory\n    current_project = detect_project()\n    if current_project is None:\n        print(\"Error: Not in a git repository. Use --project any to list all issues.\")\n        db.close()\n        raise typer.Exit(code=1)\n    sync_project(db, current_project[\"path\"])\n    issues = list_issues(db, project_id=current_project[\"id\"], status=status_filter)\n```\n\n### Commands Affected\n\nSame bug exists in:\n- `list_cmd` (trc_main.py:1510)\n- `ready` (trc_main.py:1688)\n\nBoth need the same three-way logic.\n\n### Relationship to trace-1dn75j\n\nThis is orthogonal to trace-1dn75j. That issue is about accepting paths vs names. This issue is about the flag being ignored entirely. We need to:\n1. First fix THIS bug (flag being ignored)\n2. Then enhance to accept paths (trace-1dn75j)\n\n### Test Case\n\n```bash\n# From ynab-budget directory\ntrc list --project trace\n\n# Should show trace issues, currently shows ynab-budget issues\n```", "status": "closed", "priority": 0, "created_at": "2025-11-30T15:31:08.058240Z", "updated_at": "2025-11-30T19:55:40.385039Z", "closed_at": "2025-11-30T19:55:40.385039Z", "dependencies": [{"depends_on_id": "trace-1dn75j", "type": "related"}, {"depends_on_id": "trace-64rf5b", "type": "parent"}]}
{"id": "trace-1vaoox", "title": "Test cross-project creation", "description": "Testing --project flag from outside trace repo", "status": "closed", "priority": 2, "created_at": "2025-11-18T02:49:04.759579Z", "updated_at": "2025-11-18T02:49:12.492233Z", "closed_at": "2025-11-18T02:49:12.492233Z", "dependencies": []}
{"id": "trace-1xm9bv", "title": "Clarify TodoWrite vs trace usage in CLAUDE.md", "description": "Add explicit override guidance to CLAUDE.md: TodoWrite's general instructions suggest using it for 'complex multi-step tasks', but this project uses trace for all non-trivial work. Make it clear that TodoWrite is ONLY for trivial, single-session work. Anything involving multiple files, tests, or spanning sessions should use trace.", "status": "closed", "priority": 2, "created_at": "2025-11-18T14:20:39.188540Z", "updated_at": "2025-11-18T14:32:32.025487Z", "closed_at": "2025-11-18T14:32:32.025487Z", "dependencies": []}
{"id": "trace-1ympls", "title": "Update list_issues() to support multiple statuses", "description": "Modify list_issues() function to accept status: Optional[str | list[str]]. When given a list, use SQL IN clause. When given 'any' or None for all statuses, use no filter.", "status": "closed", "priority": 2, "created_at": "2025-11-18T14:20:23.178832Z", "updated_at": "2025-11-18T14:23:14.049583Z", "closed_at": "2025-11-18T14:23:14.049583Z", "dependencies": [{"depends_on_id": "trace-1d5uth", "type": "parent"}]}
{"id": "trace-4z5w8k", "title": "Update list CLI to accept multiple --status flags", "description": "Change list command to accept multiple --status flags. Default to ['open', 'in_progress', 'blocked'] when no flags provided. Handle 'any' special case.", "status": "closed", "priority": 2, "created_at": "2025-11-18T14:20:23.290139Z", "updated_at": "2025-11-18T14:23:43.292070Z", "closed_at": "2025-11-18T14:23:43.292070Z", "dependencies": [{"depends_on_id": "trace-1d5uth", "type": "parent"}]}
{"id": "trace-5fyvij", "title": "Test batch 2", "description": "", "status": "closed", "priority": 2, "created_at": "2025-11-30T23:46:39.484224Z", "updated_at": "2025-11-30T23:46:43.400269Z", "closed_at": "2025-11-30T23:46:43.400269Z", "dependencies": []}
{"id": "trace-64rf5b", "title": "UX improvements from real-world AI agent usage", "description": "Feedback from using trace with Claude Code in ynab-budget project.\n\nCRITICAL ISSUES:\n1. Better initialization errors - 'FileNotFoundError' should suggest 'trc init'. Got cryptic error when trying to create issues before init.\n2. Batch operations - Cannot close multiple issues at once. Need: trc close ID1 ID2 ID3\n3. Clearer dependency language - 'Added blocks dependency: A \u2192 B' is confusing. Reads like 'A blocks B' but means opposite. Suggest: 'A depends on B' or 'A is blocked by B'\n4. Transaction safety - Partial writes to global DB even when JSONL fails. Should rollback or complete both.\n5. BUG: trc list --project trace shows wrong project - When run from ynab-budget directory, 'trc list --project trace' shows ynab-budget issues instead of trace issues. But 'trc list --project any | grep trace-' works correctly. Seems like --project flag not filtering properly.\n\nNICE TO HAVE:\n6. Priority flexibility - Accept both numeric (4) and text (high/critical)\n7. Dependency visualization - Show both dependencies and dependents in tree view\n8. Better list filtering - Add --all, --active, --priority flags\n9. Dependency removal - trc remove-dependency command (may exist but not documented?)\n\nWHAT WORKED WELL:\n\u2705 Mandatory descriptions (brilliant for AI context)\n\u2705 trc ready command (extremely useful)\n\u2705 JSONL format (git-friendly)\n\u2705 Readable IDs (ynab-budget-1y2ul1 > UUIDs)\n\u2705 Cross-project support\n\nCONTEXT: Using trace with Claude Code to manage ynab-budget project. Tool solves real problem (AI memory across sessions). Core concept is excellent, just needs UX polish on error messages and bulk operations.\n\nOverall Grade: B+ - Would recommend despite rough edges.", "status": "closed", "priority": 3, "created_at": "2025-11-30T15:27:34.273438Z", "updated_at": "2025-12-01T01:41:30.151288Z", "closed_at": "2025-12-01T01:41:30.151288Z", "dependencies": []}
{"id": "trace-69ouzm", "title": "Test batch 3", "description": "", "status": "closed", "priority": 2, "created_at": "2025-11-30T23:46:39.597516Z", "updated_at": "2025-11-30T23:46:43.400769Z", "closed_at": "2025-11-30T23:46:43.400769Z", "dependencies": []}
{"id": "trace-6zwjgn", "title": "Improve init error messages to suggest trc init", "description": "When FileNotFoundError occurs (e.g., trying to create issues before init), show user-friendly error suggesting 'trc init'. Current cryptic error confuses users.", "status": "closed", "priority": 1, "created_at": "2025-11-30T15:31:07.451888Z", "updated_at": "2025-11-30T23:38:25.051670Z", "closed_at": "2025-11-30T23:38:25.051670Z", "dependencies": [{"depends_on_id": "trace-16so9a", "type": "related"}, {"depends_on_id": "trace-64rf5b", "type": "parent"}]}
{"id": "trace-adiu0x", "title": "Write tests for multi-status list behavior", "description": "Add tests for: multiple status flags, default backlog behavior, --status any, single status flag still works, empty results handling", "status": "closed", "priority": 2, "created_at": "2025-11-18T14:20:23.402913Z", "updated_at": "2025-11-18T14:22:51.064269Z", "closed_at": "2025-11-18T14:22:51.064269Z", "dependencies": [{"depends_on_id": "trace-1d5uth", "type": "parent"}]}
{"id": "trace-cozpy3", "title": "Add better list filtering options", "description": "YAGNI - Not implementing. Current filtering with --status flags is sufficient for now.", "status": "closed", "priority": 3, "created_at": "2025-11-30T15:31:08.534277Z", "updated_at": "2025-12-01T01:41:30.150941Z", "closed_at": "2025-12-01T01:41:30.150941Z", "dependencies": [{"depends_on_id": "trace-64rf5b", "type": "parent"}]}
{"id": "trace-f28qjw", "title": "Document uv tool install workflow in README", "description": "Add section explaining how to install trc globally using 'uv tool install .' for regular use, and 'uv tool install --editable .' for development. The editable install allows making changes to the code while having the trc command available globally.", "status": "closed", "priority": 2, "created_at": "2025-11-18T02:20:08.717939Z", "updated_at": "2025-11-18T02:22:43.240305Z", "closed_at": "2025-11-18T02:22:43.240305Z", "dependencies": []}
{"id": "trace-hbhd8g", "title": "Fix confusing dependency language in output", "description": "Current: 'Added blocks dependency: A \u2192 B' reads like 'A blocks B' but means opposite (A is blocked by B). Change to clearer language like 'A depends on B' or 'A is blocked by B' to match mental model.", "status": "closed", "priority": 1, "created_at": "2025-11-30T15:31:07.750863Z", "updated_at": "2025-11-30T23:41:37.645827Z", "closed_at": "2025-11-30T23:41:37.645827Z", "dependencies": [{"depends_on_id": "trace-64rf5b", "type": "parent"}]}
{"id": "trace-j71u4g", "title": "Write tests for portable project IDs", "description": "Add tests for: git remote URL detection, local-only path fallback, auto-merge when identifier changes, JSONL format without project_id, migration from old format, cross-machine portability scenarios.", "status": "closed", "priority": 0, "created_at": "2025-11-30T16:16:45.600921Z", "updated_at": "2025-11-30T16:32:23.679400Z", "closed_at": "2025-11-30T16:32:23.679400Z", "dependencies": [{"depends_on_id": "trace-t2yxk3", "type": "parent"}]}
{"id": "trace-pzgtro", "title": "Update projects table schema for portable IDs", "description": "Change projects table: id (remote URL or path) as PRIMARY KEY, name (extracted name), current_path (absolute path). Migrate existing data from old schema.", "status": "closed", "priority": 0, "created_at": "2025-11-30T16:16:45.131242Z", "updated_at": "2025-11-30T16:28:58.295328Z", "closed_at": "2025-11-30T16:28:58.295328Z", "dependencies": [{"depends_on_id": "trace-t2yxk3", "type": "parent"}]}
{"id": "trace-qt70sl", "title": "Remove project_id field from JSONL format", "description": "Update export_to_jsonl() and import_from_jsonl() to exclude project_id field. JSONL should only contain issue data - project identity comes from git context. Add migration logic to strip project_id from existing JSONL files.", "status": "closed", "priority": 0, "created_at": "2025-11-30T16:16:45.246994Z", "updated_at": "2025-11-30T16:32:15.888290Z", "closed_at": "2025-11-30T16:32:15.888290Z", "dependencies": [{"depends_on_id": "trace-t2yxk3", "type": "parent"}]}
{"id": "trace-t2yxk3", "title": "Fix project_id to be machine-independent", "description": "PROBLEM: project_id uses absolute paths, making .trace/issues.jsonl not portable across machines.\n\nSOLUTION: Use git remote URL as unique identifier, remove project_id from JSONL entirely.\n\nKey Design Decisions:\n\n1. Remote URL = unique identifier for repos with remotes\n   - Example: github.com/dschartman/trace\n   - Portable across machines\n   - Extract project name from URL\n\n2. Absolute path = identifier for local-only repos\n   - No remote = not meant for collaboration anyway\n   - Portability doesn't matter for local-only\n   - If remote added later, auto-merge to URL-based identifier\n\n3. Remove project_id from JSONL files\n   - JSONL is just \"issues for this repo\"\n   - Project identity comes from git context, not JSONL content\n   - Makes JSONL truly portable\n\n4. Auto-merge when identifier changes\n   - Local path \u2192 remote URL (user adds remote)\n   - Remote URL changes (user updates remote)\n   - Detect during sync: same directory, different identifier \u2192 merge old into new\n\n5. YAGNI: Don't handle legitimate name collisions yet\n   - Two different projects could have same name (e.g., user1/trace vs user2/trace)\n   - If ambiguous: pick first match or error\n   - Over-engineering this now = YAGNI\n\nHow It Works:\n\ntrc init:\n- Detect remote URL (git remote get-url origin) or use absolute path\n- Extract project name from URL or directory name\n- Store in DB: projects(id=url_or_path, name=extracted_name, current_path=pwd)\n\nSyncing JSONL:\n- Detect current project_id (remote URL or path)\n- Check if identifier changed for this path\n- If changed: auto-merge old project into new project\n- Import/export JSONL (no project_id field!)\n\n--project flag:\n- Lookup by name in projects table\n- If multiple matches: pick first (YAGNI - don't over-engineer)\n- Future: could disambiguate with full URL\n\nJSONL Format Changes:\n\nBefore:\n{\"id\": \"trace-abc123\", \"project_id\": \"/Users/don/Repos/trace\", \"title\": \"...\"}\n\nAfter:\n{\"id\": \"trace-abc123\", \"title\": \"...\"}\n\nNo project_id field! Project identity from git context.\n\nMigration Steps:\n\n1. Detect old JSONL format (has project_id field)\n2. Strip project_id from all JSONL files\n3. Update projects table schema\n4. Migrate existing path-based IDs\n5. Test auto-merge logic\n\nEdge Cases Handled:\n\n- Repo cloned to multiple locations: \u2705 Same ID (remote URL), different current_path\n- Local repo adds remote later: \u2705 Auto-merge from path to URL\n- Remote URL changes: \u2705 Auto-merge from old to new URL\n- Name collisions: \u26a0\ufe0f YAGNI - pick first match for now\n\nRequirements:\n\n- Trace requires git (git init must be run)\n- Error message: \"Error: trace requires git. Run: git init\"", "status": "closed", "priority": 0, "created_at": "2025-11-30T15:49:35.837249Z", "updated_at": "2025-11-30T19:37:06.007815Z", "closed_at": "2025-11-30T19:37:06.007815Z", "dependencies": [{"depends_on_id": "trace-64rf5b", "type": "parent"}]}
{"id": "trace-ycqwxo", "title": "Valid issue", "description": "", "status": "closed", "priority": 2, "created_at": "2025-11-30T23:46:48.754172Z", "updated_at": "2025-11-30T23:46:52.637368Z", "closed_at": "2025-11-30T23:46:52.637368Z", "dependencies": []}
{"id": "trace-yk4i7i", "title": "Update README.md for new list behavior", "description": "Check README.md for any references to trc list behavior and update if needed. Ensure examples show the new backlog default.", "status": "closed", "priority": 2, "created_at": "2025-11-18T14:25:42.985648Z", "updated_at": "2025-11-18T14:29:59.863034Z", "closed_at": "2025-11-18T14:29:59.863034Z", "dependencies": [{"depends_on_id": "trace-11efq1", "type": "parent"}]}
