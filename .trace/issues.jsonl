{"id": "trace-0t04oj", "project_id": "/Users/don.schartman/Repos/trace", "title": "CLI: Add --with-references flag to show command", "description": "**Problem:** No easy way to see 'what references this issue' or 'what would be unblocked if I close this'.\n\n**Proposed enhancement:**\n```bash\ntrc show <issue-id> --with-references\n```\n\n**Output would include:**\n```\n[Current show output]\n\nReferences:\n  Children (3):\n    - trace-xxx: Some child issue [open]\n    - trace-yyy: Another child [closed]\n  \n  Blocked by this (2):\n    - trace-zzz: Implementation waiting on this [blocked]\n  \n  Related issues (1):\n    - trace-aaa: Similar investigation in other module\n```\n\n**Use cases:**\n- Understanding impact before closing an issue\n- Finding implementation work that references investigation findings\n- Discovering orphaned issues\n\n**Alternative:** Could make this default behavior of `trc show`, not requiring a flag.", "status": "closed", "priority": 2, "created_at": "2025-11-20T21:59:27.750584Z", "updated_at": "2025-11-21T00:56:56.372406Z", "closed_at": null, "dependencies": [{"depends_on_id": "trace-1gbj2x", "type": "parent"}]}
{"id": "trace-11ovo8", "project_id": "/Users/don.schartman/Repos/trace", "title": "Test without description again", "description": "", "status": "closed", "priority": 2, "created_at": "2025-11-17T21:31:12.833549Z", "updated_at": "2025-11-17T21:34:00.138603Z", "closed_at": "2025-11-17T21:34:00.138603Z", "dependencies": []}
{"id": "trace-13l3ra", "project_id": "/Users/don.schartman/Repos/trace", "title": "CLI: Improve error message when closing issue with open children", "description": "**Original proposal:** Add guidance to error message when trying to close issue with open children.\n\n**Current error message:**\n```\nError: Cannot close issue with open children:\n  - test-dual-parent-1d3gjt: Child 1 [open]\n```\n\n**Location:** trc_main.py:1452-1456\n\n## Analysis\n\n### Current Message Provides Sufficient Information\nThe error message contains the minimal information needed to make a good decision:\n1. \u2705 Clear problem: \"Cannot close issue with open children\"\n2. \u2705 Lists the blocking children with IDs, titles, and status\n3. \u2705 User can see exactly what's blocking the close operation\n\n### Proposed Addition (from original trace)\n```\nIf these children are deliverables (not sub-tasks), consider:\n  1. 'trc reparent <child-id> <new-parent>' to move them\n  2. 'trc reparent <child-id> none' to make them top-level\n  3. Close children if they're documentation artifacts\n\nRun 'trc tree <issue-id>' to visualize the hierarchy.\n```\n\n### Problems with Proposed Addition\n\n1. **Makes assumptions about user's mental model**\n   - \"If these children are deliverables (not sub-tasks)\" - assumes this distinction\n   - May not apply to all use cases\n   \n2. **Adds noise without clear value**\n   - Users who understand their structure know what to do\n   - LLMs may not process the guidance effectively anyway\n   \n3. **Duplicates documentation**\n   - Investigation pattern (trace-1y3m2h) addresses root cause\n   - Documentation should teach patterns, not error messages\n   \n4. **LLM-first tool consideration**\n   - LLMs don't benefit from verbose error guidance like humans do\n   - They need clear, concise error messages\n   - Pattern understanding comes from documentation/prompts, not error text\n\n## YAGNI Assessment\n\nThis is premature optimization:\n- Current error message works fine\n- No evidence that users are confused by it\n- Better to focus on higher-value changes to the framework\n- Should evaluate how LLMs actually use the tool before adding verbosity\n\n**Better approach:**\n- Keep error messages minimal and clear\n- Put usage patterns in documentation (trace-1y3m2h)\n- Monitor actual usage to see if this becomes a real problem\n\n## Decision\n\n**Close this issue.** Current error message is sufficient.\n\nThe real solution to confusion is:\n1. Documentation improvements (trace-1y3m2h - investigation pattern)\n2. Understanding how LLMs actually use trace in practice\n3. Letting usage patterns emerge before optimizing\n\nIf future usage reveals users are frequently confused by this error, we can revisit. But currently, this is solving a problem that doesn't exist.\n\n**Related:**\n- trace-1y3m2h: Investigation pattern documentation (addresses root cause)\n- trace-1gbj2x: Parent issue for UX improvements", "status": "closed", "priority": 2, "created_at": "2025-11-20T21:59:09.896045Z", "updated_at": "2025-11-21T14:12:57.128289Z", "closed_at": "2025-11-21T14:12:57.128289Z", "dependencies": [{"depends_on_id": "trace-1gbj2x", "type": "parent"}]}
{"id": "trace-14czms", "project_id": "/Users/don.schartman/Repos/trace", "title": "Update AI agent guide with mandatory description principle", "description": "Update docs/ai-agent-guide.md to emphasize ALWAYS providing descriptions. Add section on why this matters for cross-session work. Show the empty string opt-out. Include examples of good vs bad descriptions. Part of making --description mandatory (trace-nbiip2).", "status": "closed", "priority": 2, "created_at": "2025-11-17T20:13:12.888726Z", "updated_at": "2025-11-17T21:24:18.946619Z", "closed_at": "2025-11-17T21:24:18.946619Z", "dependencies": [{"depends_on_id": "trace-nbiip2", "type": "parent"}]}
{"id": "trace-15lm9i", "project_id": "/Users/don.schartman/Repos/trace", "title": "Fix test isolation - tests modify real ~/.trace/trace.db", "description": "CRITICAL BUG: Running 'uv run pytest' modifies the real ~/.trace/trace.db database instead of using isolated test environments. This caused loss of all tracked issues after running tests. Need to: (1) Override get_trace_home() in tests to use temp directories, (2) Ensure pytest fixtures create isolated DBs per test, (3) Add TRACE_TEST_MODE environment variable as safeguard. Tests should NEVER touch real user data. This is a data loss bug.", "status": "closed", "priority": 0, "created_at": "2025-11-17T20:27:06.225838Z", "updated_at": "2025-11-17T20:29:59.224434Z", "closed_at": "2025-11-17T20:29:59.224434Z", "dependencies": []}
{"id": "trace-167sry", "project_id": "/Users/don.schartman/Repos/trace", "title": "Replace --all flag with --project any in trc_main.py", "description": "", "status": "closed", "priority": 2, "created_at": "2025-11-17T19:53:02.464576Z", "updated_at": "2025-11-17T19:55:39.155645Z", "closed_at": "2025-11-17T19:55:39.155645Z", "dependencies": [{"depends_on_id": "trace-1ak6bv", "type": "parent"}]}
{"id": "trace-186ji4", "project_id": "/Users/don.schartman/Repos/trace", "title": "Update trc guide to emphasize mandatory --description", "description": "Update the cli_guide() output to reflect that --description is now mandatory. Show the empty string opt-out pattern. Emphasize why this matters for AI agents (context preservation across sessions). Part of making --description mandatory (trace-nbiip2).", "status": "closed", "priority": 2, "created_at": "2025-11-17T20:13:12.461189Z", "updated_at": "2025-11-17T21:22:19.434442Z", "closed_at": "2025-11-17T21:22:19.434442Z", "dependencies": [{"depends_on_id": "trace-nbiip2", "type": "parent"}]}
{"id": "trace-1ak6bv", "project_id": "/Users/don.schartman/Repos/trace", "title": "Refactor flags to use --project any and --status any for consistency", "description": "", "status": "closed", "priority": 2, "created_at": "2025-11-17T19:52:46.978133Z", "updated_at": "2025-11-17T23:11:10.316046Z", "closed_at": "2025-11-17T23:11:10.316046Z", "dependencies": []}
{"id": "trace-1bb5hb", "project_id": "/Users/don.schartman/Repos/trace", "title": "CLI: Warn when creating dual-parent relationships", "description": "**Original Problem:** `trc add-dependency X Y --type parent` silently creates dual parents if X already has a parent, which was thought to cause confusion.\n\n## Investigation Findings\n\nTested actual behavior of dual parents in trace. Results:\n\n### Tree Display: Works Perfectly \u2713\n```\nGrandparent\n\u251c\u2500 Parent A\n\u2502  \u2514\u2500 Child C [appears here]\n\u2514\u2500 Parent B\n   \u2514\u2500 Child C [also appears here - same child, shown in both branches]\n```\n\nThe tree display correctly shows Child C under both parents when viewing from grandparent level. Viewing `trc tree parent-a` shows Child C, and `trc tree parent-b` also shows Child C. This is the expected and correct behavior.\n\n### Closing Logic: Consistent \u2713\n- Cannot close Parent A while Child C is open (blocks correctly)\n- Cannot close Parent B while Child C is open (blocks correctly)\n- Once Child C is closed, can close Parent A independently\n- Or can close Parent B independently\n- Or can close both\n- Child C shows as closed under both parent branches\n\n### Conclusion: Dual Parents Are Not A Problem\n\nDual parents work exactly as expected:\n- Tree visualization is clear (child appears under both parents)\n- Closing logic is consistent (child blocks both parents)\n- Relationships are maintained correctly\n- No ambiguity or confusion in the implementation\n\n## Real Root Cause: Documentation Gap\n\nThe confusion about dual parents came from **investigation pattern misunderstanding**, not from dual parents being technically problematic.\n\nWhen users got confused about \"investigation findings vs implementation work\", they accidentally created dual parents because the pattern wasn't documented. The solution is **better documentation** (trace-1y3m2h), not warnings.\n\n## Why Warning Is Wrong Approach\n\n**Problem with warning for LLM-first tool:**\n1. LLM sees: \"Warning: dual parent. Continue? [y/N]\"\n2. LLM either:\n   - Always says yes (defeating purpose)\n   - Gets confused and asks user\n   - Makes arbitrary choice\n3. Warning doesn't help LLM make better decision\n\n**Better approach:** Document the patterns clearly so LLM creates correct structure from the start.\n\n## YAGNI Assessment\n\nAdding dual-parent warnings is a YAGNI (You Aren't Gonna Need It) change:\n- Dual parents work correctly in the implementation\n- The confusion comes from usage patterns, not the feature\n- Investigation pattern documentation (trace-1y3m2h) addresses root cause\n- May discover other patterns in the future that also use dual parents\n- Better to let real usage patterns emerge before adding constraints\n\n## Decision\n\n**Close this issue.** Dual parents are not a problem. Focus on documentation improvements instead.\n\nIf future usage reveals specific problems with dual parents, we can revisit. But currently, this is solving a problem that doesn't exist at the technical level.\n\n**Related:**\n- trace-1y3m2h: Investigation pattern documentation (addresses root cause)\n- trace-1gbj2x: Parent issue for UX improvements", "status": "closed", "priority": 1, "created_at": "2025-11-20T21:59:18.621057Z", "updated_at": "2025-11-21T14:05:10.642073Z", "closed_at": "2025-11-21T14:05:10.642073Z", "dependencies": [{"depends_on_id": "trace-1gbj2x", "type": "parent"}]}
{"id": "trace-1bsib5", "project_id": "/Users/don.schartman/Repos/trace", "title": "Implement --status filter in list_issues() and cli_ready()", "description": "", "status": "closed", "priority": 2, "created_at": "2025-11-17T19:54:55.903268Z", "updated_at": "2025-11-17T23:11:05.951962Z", "closed_at": "2025-11-17T23:11:05.951962Z", "dependencies": [{"depends_on_id": "trace-1ak6bv", "type": "parent"}, {"depends_on_id": "trace-1jpyzc", "type": "blocks"}]}
{"id": "trace-1c9z04", "project_id": "/Users/don.schartman/Repos/trace", "title": "CLI: Add remove-dependency command", "description": "**Problem:** No way to remove dependencies once added. Users must manually edit .trace/issues.jsonl (not recommended) or directly modify the database.\n\n## How Dependencies Work\n\nAll relationships use a single `dependencies` table with three types:\n\n1. **`type = 'parent'`** - Parent-child hierarchy\n   - `issue_id` is the child\n   - `depends_on_id` is the parent\n   - Used by `trc tree` to build hierarchy\n\n2. **`type = 'blocks'`** - Blocking dependency\n   - `issue_id` is the blocked issue (can't start until blocker done)\n   - `depends_on_id` is the blocker (must be completed first)\n   - Used by `trc ready` to filter out blocked work\n\n3. **`type = 'related'`** - Informational link\n   - No blocking behavior\n   - Just indicates two issues are related\n\n**Schema:**\n```sql\nCREATE TABLE dependencies (\n    issue_id TEXT NOT NULL,\n    depends_on_id TEXT NOT NULL,\n    type TEXT NOT NULL,\n    created_at TEXT NOT NULL,\n    PRIMARY KEY (issue_id, depends_on_id)\n);\n```\n\n## Valid Use Cases for Removing Dependencies\n\n1. **Incorrect blocks relationship**: \"Issue B doesn't actually depend on Issue A\"\n2. **Changed requirements**: \"We decided to do this in parallel, remove the blocker\"\n3. **Wrong related link**: \"These aren't actually related, I linked the wrong issue\"\n4. **Removing dual parents**: While dual parents work fine technically, user may want to clean up\n5. **Reparenting scenarios**: Remove parent without immediately adding a new one\n\n## Implementation Plan\n\n### Proposed Command Signature\n\n```bash\ntrc remove-dependency <issue-id> <dependency-id> [--type parent|blocks|related]\n```\n\n**Arguments:**\n- `issue_id`: The issue that has the dependency\n- `dependency_id`: The issue that is depended upon\n- `--type`: Optional, specifies which type to remove (if omitted, removes all types)\n\n### Examples\n\n```bash\n# Remove blocking dependency (Issue B no longer blocked by Issue A)\ntrc remove-dependency issue-b issue-a --type blocks\n\n# Remove parent relationship (Issue C no longer child of Issue A)\ntrc remove-dependency issue-c issue-a --type parent\n\n# Remove all relationships between two issues\ntrc remove-dependency issue-x issue-y\n```\n\n### Implementation Details\n\n**Code location:** Add CLI command in trc_main.py (around line 1750, near add-dependency)\n\n**Internal function exists:** `remove_dependency()` already exists at line 703-719:\n```python\ndef remove_dependency(\n    db: sqlite3.Connection,\n    issue_id: str,\n    depends_on_id: str,\n) -> None:\n    \"\"\"Remove a dependency between two issues.\"\"\"\n    db.execute(\n        \"DELETE FROM dependencies WHERE issue_id = ? AND depends_on_id = ?\",\n        (issue_id, depends_on_id),\n    )\n    db.commit()\n```\n\n**Note:** Current internal function removes ALL types of dependencies between two issues. Need to either:\n1. Add `type` parameter to internal function to support selective removal\n2. Make CLI remove all types if no `--type` specified\n\n### Proposed CLI Implementation\n\n```python\n@app.command(name=\"remove-dependency\")\ndef remove_dependency_cmd(\n    issue_id: Annotated[str, typer.Argument(help=\"Issue ID that has the dependency\")],\n    depends_on_id: Annotated[str, typer.Argument(help=\"Issue that is depended upon\")],\n    dep_type: Annotated[Optional[str], typer.Option(\"--type\", help=\"Dependency type to remove (parent, blocks, related). If omitted, removes all types.\")] = None,\n):\n    \"\"\"Remove a dependency between two existing issues.\"\"\"\n    \n    lock_path = get_lock_path()\n    with file_lock(lock_path):\n        db = get_db()\n        \n        # Resolve issue IDs to get project paths\n        issue = get_issue_by_id(db, issue_id)\n        dependency = get_issue_by_id(db, depends_on_id)\n        \n        if not issue:\n            print(f\"Error: Issue '{issue_id}' not found\")\n            db.close()\n            raise typer.Exit(code=1)\n            \n        if not dependency:\n            print(f\"Error: Issue '{depends_on_id}' not found\")\n            db.close()\n            raise typer.Exit(code=1)\n        \n        # Check if dependency exists\n        if dep_type:\n            cursor = db.execute(\n                \"SELECT 1 FROM dependencies WHERE issue_id = ? AND depends_on_id = ? AND type = ?\",\n                (issue_id, depends_on_id, dep_type)\n            )\n            if not cursor.fetchone():\n                print(f\"Error: No {dep_type} dependency from {issue_id} to {depends_on_id}\")\n                db.close()\n                raise typer.Exit(code=1)\n                \n            # Remove specific type\n            db.execute(\n                \"DELETE FROM dependencies WHERE issue_id = ? AND depends_on_id = ? AND type = ?\",\n                (issue_id, depends_on_id, dep_type)\n            )\n            print(f\"Removed {dep_type} dependency: {issue_id} \u2192 {depends_on_id}\")\n        else:\n            cursor = db.execute(\n                \"SELECT type FROM dependencies WHERE issue_id = ? AND depends_on_id = ?\",\n                (issue_id, depends_on_id)\n            )\n            types = [row[0] for row in cursor.fetchall()]\n            \n            if not types:\n                print(f\"Error: No dependencies from {issue_id} to {depends_on_id}\")\n                db.close()\n                raise typer.Exit(code=1)\n            \n            # Remove all types\n            remove_dependency(db, issue_id, depends_on_id)\n            print(f\"Removed {', '.join(types)} dependencies: {issue_id} \u2192 {depends_on_id}\")\n        \n        # Export to JSONL for both projects\n        for project_path in {issue[\"project_id\"], dependency[\"project_id\"]}:\n            trace_dir = Path(project_path) / \".trace\"\n            jsonl_path = trace_dir / \"issues.jsonl\"\n            export_to_jsonl(db, project_path, str(jsonl_path))\n            set_last_sync_time(db, project_path, time.time())\n        \n        db.close()\n```\n\n### Testing Checklist\n\n- [ ] Remove parent dependency (verify `trc tree` updates correctly)\n- [ ] Remove blocks dependency (verify `trc ready` updates correctly)\n- [ ] Remove related dependency (verify `trc show` updates correctly)\n- [ ] Remove all dependencies between two issues (no --type specified)\n- [ ] Error handling: dependency doesn't exist\n- [ ] Error handling: issue IDs don't exist\n- [ ] Cross-project dependencies (ensure both JSONL files updated)\n- [ ] Verify JSONL export after removal\n\n## Impact\n\n- **Complexity:** Low - internal function exists, just need CLI wrapper\n- **Value:** High - enables fixing mistakes without manual file editing\n- **Risk:** Low - removal is safer than adding\n- **Testing:** Straightforward\n\n## Priority Justification\n\n**Priority 1** because:\n- No workaround except manual file editing\n- Blocking users from fixing their own mistakes\n- Implementation is straightforward (function exists)\n- Frequently needed operation (people make linking mistakes)", "status": "open", "priority": 1, "created_at": "2025-11-20T21:59:03.575486Z", "updated_at": "2025-11-21T14:09:31.818221Z", "closed_at": null, "dependencies": [{"depends_on_id": "trace-1gbj2x", "type": "parent"}]}
{"id": "trace-1dn75j", "project_id": "/Users/don.schartman/Repos/trace", "title": "CLI: Make --project flag accept both names and paths", "description": "## Root Cause Analysis (CONFIRMED)\n\n**The bug is real.** The `--project` flag only accepts project **names** (like `flink-cdc`), not paths (like `~/Repos/flink-cdc`).\n\n### Code Analysis\n\nIn `trc_main.py:1230-1245`, the project lookup only queries by name:\n\n```python\nif project_flag:\n    # Look up in registry\n    cursor = db.execute(\n        \"SELECT path, name FROM projects WHERE name = ?\",\n        (project_flag,)\n    )\n```\n\n**What happened:**\n1. `--project ~/Repos/flink-cdc` \u2192 searches WHERE name=\"~/Repos/flink-cdc\" \u2192 not found\n2. `--project /Users/don.schartman/Repos/flink-cdc` \u2192 searches WHERE name=\"/Users/...\" \u2192 not found  \n3. `--project flink-cdc` \u2192 searches WHERE name=\"flink-cdc\" \u2192 found! \u2713\n\n### Why This Is Unintuitive\n\n- Project IDs internally use absolute paths (`project_id` = full path)\n- Error message doesn't explain you need to use name, not path\n- Users naturally try paths since that's how they think about locations\n- No documentation mentions this name-only requirement\n\n### Proposed Fix\n\nMake `--project` accept **either** name OR path:\n\n```python\nif project_flag:\n    # Look up in registry by name OR path\n    db = get_db()\n    \n    # Expand path if it looks like one\n    expanded_path = None\n    if \"/\" in project_flag or project_flag.startswith(\"~\"):\n        expanded_path = str(Path(project_flag).expanduser().resolve())\n    \n    # Try both name and path lookups\n    cursor = db.execute(\n        \"SELECT path, name FROM projects WHERE name = ? OR path = ?\",\n        (project_flag, expanded_path or project_flag)\n    )\n    row = cursor.fetchone()\n    \n    if row is None:\n        print(f\"Error: Project '{project_flag}' not found in registry\")\n        print(\"Hint: Run 'trc list --project any' to see available projects\")\n        db.close()\n        raise typer.Exit(code=1)\n```\n\nThis would make all forms work:\n- `--project flink-cdc` \u2713 (lookup by name)\n- `--project ~/Repos/flink-cdc` \u2713 (lookup by expanded path)\n- `--project /Users/don.schartman/Repos/flink-cdc` \u2713 (lookup by path)\n\n### Impact\n\n- Low implementation complexity\n- High UX improvement\n- Makes behavior consistent with how users think about projects\n- Backward compatible (existing name-based usage still works)\n\n### Locations to Fix\n\nThis pattern appears in multiple commands that accept `--project`:\n- `cli_create` (trc_main.py:1226)\n- `cli_list` (trc_main.py:1305) - uses \"any\" special case, may need update\n- `cli_ready` (trc_main.py:1472) - uses \"any\" special case, may need update\n\nShould extract into helper function: `resolve_project(project_flag: str) -> dict`", "status": "open", "priority": 2, "created_at": "2025-11-20T17:46:58.650688Z", "updated_at": "2025-11-21T13:44:32.369983Z", "closed_at": null, "dependencies": []}
{"id": "trace-1eaowh", "project_id": "/Users/don.schartman/Repos/trace", "title": "Test without description", "description": "", "status": "closed", "priority": 2, "created_at": "2025-11-17T21:30:40.206131Z", "updated_at": "2025-11-17T21:34:00.116055Z", "closed_at": "2025-11-17T21:34:00.116055Z", "dependencies": []}
{"id": "trace-1gbj2x", "project_id": "/Users/don.schartman/Repos/trace", "title": "UX: Improve guidance for investigation pattern and parent-child relationships", "description": "Feedback from AI agent usage in change-capture project investigating Schema Registry removal.\n\n**Problem:** Agent got confused about when to create children vs siblings during investigation, leading to dual-parent relationships and inability to close investigation.\n\n**Root cause:** Lack of clear guidance on distinguishing 'investigation outputs' (documentation that closes with investigation) vs 'implementation work' (stays open after investigation).\n\n**Proposed improvements split into child issues:**\n1. Documentation improvements for investigation pattern\n2. CLI UX improvements for parent-child operations\n3. Validation tooling to catch structural issues\n\nSee children for detailed suggestions.", "status": "open", "priority": 1, "created_at": "2025-11-20T21:58:47.936980Z", "updated_at": "2025-11-20T21:58:47.936980Z", "closed_at": null, "dependencies": []}
{"id": "trace-1hs8ox", "project_id": "/Users/don.schartman/Repos/trace", "title": "Update CLI parsing in main() for new flags", "description": "", "status": "closed", "priority": 2, "created_at": "2025-11-17T19:54:56.330278Z", "updated_at": "2025-11-17T23:11:06.001950Z", "closed_at": "2025-11-17T23:11:06.001950Z", "dependencies": [{"depends_on_id": "trace-1ak6bv", "type": "parent"}, {"depends_on_id": "trace-7fpjn5", "type": "blocks"}]}
{"id": "trace-1jpyzc", "project_id": "/Users/don.schartman/Repos/trace", "title": "Write tests for --status any/open/closed flag behavior", "description": "", "status": "closed", "priority": 2, "created_at": "2025-11-17T19:53:02.072158Z", "updated_at": "2025-11-17T23:11:05.750949Z", "closed_at": "2025-11-17T23:11:05.750949Z", "dependencies": [{"depends_on_id": "trace-1ak6bv", "type": "parent"}]}
{"id": "trace-1ndtvk", "project_id": "/Users/don.schartman/Repos/trace", "title": "Add --description flag to trc update command", "description": "Adds --description flag to trc update command. Backend already supported it in update_issue() and cli_update() functions, just needed to add CLI argument parsing in main() and update help text.", "status": "closed", "priority": 2, "created_at": "2025-11-17T20:11:30.365680Z", "updated_at": "2025-11-17T21:39:40.010851Z", "closed_at": "2025-11-17T21:39:40.010851Z", "dependencies": []}
{"id": "trace-1usx4o", "project_id": "/Users/don.schartman/Repos/trace", "title": "Test with description", "description": "This is a test", "status": "closed", "priority": 2, "created_at": "2025-11-17T21:19:12.693574Z", "updated_at": "2025-11-17T21:20:20.716477Z", "closed_at": "2025-11-17T21:20:20.716477Z", "dependencies": []}
{"id": "trace-1uzjlc", "project_id": "/Users/don.schartman/Repos/trace", "title": "Implement --project any in list_issues() and cli_list()", "description": "", "status": "closed", "priority": 2, "created_at": "2025-11-17T19:54:55.479495Z", "updated_at": "2025-11-17T23:11:05.901459Z", "closed_at": "2025-11-17T23:11:05.901459Z", "dependencies": [{"depends_on_id": "trace-1ak6bv", "type": "parent"}, {"depends_on_id": "trace-ki1b46", "type": "blocks"}]}
{"id": "trace-1v6mds", "project_id": "/Users/don.schartman/Repos/trace", "title": "Documentation: Evaluate redundancy between trc guide command and docs/ai-agent-guide.md", "description": "## Problem\n\nWe have two similar but different documentation sources for AI agent integration:\n\n1. **`trc guide` command** (trc_main.py:1877-1970)\n   - Hardcoded text, 90 lines\n   - Designed to fit on one screen\n   - Users run `trc guide` and paste into their CLAUDE.md\n   - **This is what AI agents actually see and use**\n   - Source of truth for practical usage\n\n2. **`docs/ai-agent-guide.md`**\n   - Comprehensive reference, 358 lines\n   - Much more detailed with examples and workflows\n   - NOT actively consumed by users (guide is hardcoded)\n   - May drift out of sync with `trc guide` output\n\n## Questions to Answer\n\n1. **Should we keep both?**\n   - If yes: What's the relationship? Should they stay in sync?\n   - If no: Which one should we keep?\n\n2. **If we keep both:**\n   - Is ai-agent-guide.md valuable as extended documentation?\n   - Should we reference it from `trc guide` output?\n   - Who is the audience for the comprehensive guide?\n\n3. **If we consolidate:**\n   - Should `trc guide` read from ai-agent-guide.md (extract/summarize)?\n   - Or should we delete ai-agent-guide.md and just maintain hardcoded guide?\n\n## Current State Analysis\n\n**ai-agent-guide.md has valuable content not in `trc guide`:**\n- Detailed workflow examples (feature planning, bug discovery, iterative refinement)\n- Cross-session continuity patterns\n- Integration with TodoWrite discussion\n- Extended examples with full command sequences\n- Philosophy and best practices sections\n\n**`trc guide` is concise by design:**\n- Fits on one screen for easy pasting\n- Quick reference format\n- Just enough to get started\n- No extended examples or workflows\n\n## Possible Approaches\n\n### Option A: Keep Both with Clear Roles\n- **`trc guide`**: Quick start template for CLAUDE.md (current state)\n- **`docs/ai-agent-guide.md`**: Comprehensive reference\n- Add to `trc guide` output: \"For detailed workflows see docs/ai-agent-guide.md\"\n- Accept they may drift slightly (guide is minimal, docs are comprehensive)\n\n### Option B: Generate Guide from Docs\n- Make `trc guide` command read and summarize ai-agent-guide.md\n- Keep single source of truth (ai-agent-guide.md)\n- Guide command extracts key sections programmatically\n- More complex implementation\n\n### Option C: Delete ai-agent-guide.md\n- Only maintain hardcoded `trc guide` output\n- Add comprehensive examples to `trc guide` (but then it's no longer one screen)\n- Simpler maintenance, but lose comprehensive reference\n\n### Option D: Move Comprehensive Docs to README or Wiki\n- Keep `trc guide` minimal and hardcoded\n- Move ai-agent-guide.md content to README.md or GitHub wiki\n- Clear separation: command output vs documentation site\n\n## Impact of Decision\n\n**Keeping both:**\n- \u2705 Comprehensive reference available for those who want it\n- \u2705 Quick-start guide stays concise\n- \u26a0\ufe0f Risk of drift/inconsistency\n- \u26a0\ufe0f Maintenance burden to keep both updated\n\n**Consolidating to guide only:**\n- \u2705 Single source of truth\n- \u2705 Simpler maintenance\n- \u274c Lose comprehensive examples and workflows\n- \u274c May become too long for one-screen quick reference\n\n**Generating guide from docs:**\n- \u2705 Single source of truth\n- \u2705 Keep comprehensive docs\n- \u274c More complex implementation\n- \u26a0\ufe0f Guide generation logic needs maintenance\n\n## Recommendation Needed\n\nNeed to decide on approach before making further documentation updates (like adding investigation pattern guidance).\n\nCurrently leaning toward **Option A** (keep both with clear roles), but want explicit decision on:\n1. What's the purpose of ai-agent-guide.md if nobody uses it?\n2. Should we actively promote it or just let `trc guide` be the interface?\n3. When making changes (like investigation pattern), update both or just guide?", "status": "open", "priority": 2, "created_at": "2025-11-21T13:53:00.658208Z", "updated_at": "2025-11-21T13:53:00.658208Z", "closed_at": null, "dependencies": []}
{"id": "trace-1y3m2h", "project_id": "/Users/don.schartman/Repos/trace", "title": "Documentation: Add investigation pattern guidance to trc guide command", "description": "**Problem:** The `trc guide` output doesn't distinguish between investigation outputs vs implementation work, leading to confusion about when to close investigations.\n\n## Context Clarification\n\nThere are three separate documents:\n1. **`trc guide` command** (hardcoded in trc_main.py:1877-1970) - **SOURCE OF TRUTH**\n   - 90 lines, designed to fit on one screen\n   - Users run this and paste output into their CLAUDE.md\n   - This is what AI agents actually see and use\n2. **`docs/ai-agent-guide.md`** - Comprehensive reference (358 lines)\n   - More detailed but NOT actively consumed (guide is hardcoded)\n   - Could be kept in sync or allowed to drift\n3. **This repo's CLAUDE.md** - For developing trace itself (not relevant here)\n\nWhen parent issue says \"add to CLAUDE.md\", it means: **update the `trc guide` hardcoded text** so users get this guidance when they run the command.\n\n## What's Missing from `trc guide` Output\n\nCurrent guide has:\n- When to use trace vs TodoWrite\n- Granularity philosophy  \n- Key commands\n- Cross-project usage\n\nMissing:\n- **Investigation pattern** - how to structure exploratory work\n- When findings/documentation should be children vs siblings\n- How to close investigation work without closing implementation work\n\n## Root Cause of Confusion\n\nDuring change-capture investigation (Schema Registry removal), encountered dual-parent relationships and couldn't close investigation cleanly. The guide didn't explain that:\n- Investigation findings = ephemeral documentation (children that close together)\n- Implementation work = deliverables (siblings that stay open after investigation)\n\n## Recommendation\n\n**Should we do this?** **YES** \u2713\n\n**Target:** Update hardcoded `guide_text` in trc_main.py:1879-1969\n\n**Constraint:** Keep it concise (guide should fit on one screen, ~90 lines total)\n\n## Implementation Plan\n\n### Phase 1: Add Investigation Pattern Content\n\nAdd after the \"Granularity Philosophy\" section (around line 1906), before \"Proactive Usage\":\n\n```python\n**Investigation Pattern:**\nWhen exploring code or investigating issues, structure helps separate analysis from work:\n\n- Investigation = child of epic/feature (closes when analysis done)\n- Investigation findings = children of investigation (documentation, close together)\n- Implementation work = siblings of investigation (stay open, reference findings)\n\nExample:\n```\nEpic: Improve performance\n\u251c\u2500 Investigation: Query bottlenecks [close when done]\n\u2502  \u251c\u2500 Finding: N+1 queries [documentation]\n\u2502  \u2514\u2500 Finding: Missing index [documentation]\n\u251c\u2500 Task: Add index [stays open, references findings]\n\u2514\u2500 Task: Refactor queries [stays open, references findings]\n```\n\nAnti-pattern: Making action items children of investigation (can't close investigation).\nInstead: Create tasks as siblings, reference investigation in description.\n```\n\n**Length:** ~15 lines (keeps guide under 100 lines total)\n\n### Phase 2: Quality Review & Refactor (CRITICAL)\n\n**DO NOT just add content and stop.** After adding investigation pattern:\n\n1. **Review entire `trc guide` output for quality**\n   - Read it as if you're a new user\n   - Check for redundancy, unclear language, or bloat\n   - Ensure it still fits on one screen\n\n2. **Refactor for clarity and conciseness**\n   - Can any sections be combined?\n   - Are there redundant examples?\n   - Is the language as concise as possible?\n   - Does the flow make sense?\n\n3. **Test the length**\n   - Run `trc guide | wc -l` to verify still under ~100 lines\n   - If over, cut or condense other sections\n   - Priority: keep it scannable and actionable\n\n4. **Validate with fresh eyes**\n   - Does it answer: \"When do I use trace?\" \u2713\n   - Does it answer: \"How do I structure work?\" \u2713\n   - Does it answer: \"What commands do I need?\" \u2713\n   - Is anything confusing or unnecessary?\n\n**Goal:** High-quality, concise guide that doesn't bloat over time.\n\n**Anti-pattern:** Incremental additions without refactoring = death by a thousand cuts\n\n## Success Criteria\n\n- [ ] Investigation pattern added to guide\n- [ ] Entire guide reviewed for quality\n- [ ] Redundancy removed, language tightened\n- [ ] Guide still fits on one screen (~90-100 lines max)\n- [ ] Fresh read confirms clarity and scannability\n- [ ] No bloat or unnecessary verbosity\n\n## Impact\n\n- Prevents dual-parent confusion\n- Clarifies when to close investigation work\n- Maintains guide quality through refactoring discipline\n- High value for AI agents doing exploratory work\n\n## Open Question\n\nShould we also update `docs/ai-agent-guide.md` to stay in sync, or just let it be a separate comprehensive reference that may drift?", "status": "open", "priority": 2, "created_at": "2025-11-20T21:58:55.926717Z", "updated_at": "2025-11-21T14:17:58.938108Z", "closed_at": null, "dependencies": [{"depends_on_id": "trace-1gbj2x", "type": "parent"}]}
{"id": "trace-4pccvs", "project_id": "/Users/don.schartman/Repos/trace", "title": "Test without description", "description": "", "status": "closed", "priority": 2, "created_at": "2025-11-17T21:29:49.415612Z", "updated_at": "2025-11-17T21:30:00.446056Z", "closed_at": "2025-11-17T21:30:00.446056Z", "dependencies": []}
{"id": "trace-7fpjn5", "project_id": "/Users/don.schartman/Repos/trace", "title": "Implement mandatory --description validation in cli_create()", "description": "Update cli_create() and main() argument parsing to require --description flag. Throw clear error if missing: 'Error: --description is required. Use --description \"...\" or --description \"\" for none.' Allow empty string as explicit opt-out. Update argument parsing in main() to check for this. Part of mandatory description work (trace-nbiip2).", "status": "closed", "priority": 2, "created_at": "2025-11-17T20:13:35.289628Z", "updated_at": "2025-11-17T21:19:02.058585Z", "closed_at": "2025-11-17T21:19:02.058585Z", "dependencies": [{"depends_on_id": "trace-nbiip2", "type": "parent"}]}
{"id": "trace-7tn2rj", "project_id": "/Users/don.schartman/Repos/trace", "title": "Update README and other docs for mandatory --description", "description": "Update README.md, quickstart.md, cli-design.md to reflect mandatory --description flag. Show examples with descriptions. Update error examples. Part of making --description mandatory (trace-nbiip2).", "status": "closed", "priority": 2, "created_at": "2025-11-17T20:13:13.277052Z", "updated_at": "2025-11-17T21:27:24.793389Z", "closed_at": "2025-11-17T21:27:24.793389Z", "dependencies": [{"depends_on_id": "trace-nbiip2", "type": "parent"}]}
{"id": "trace-b7ijb2", "project_id": "/Users/don.schartman/Repos/trace", "title": "Test with empty description", "description": "", "status": "closed", "priority": 2, "created_at": "2025-11-17T21:19:18.197804Z", "updated_at": "2025-11-17T21:20:20.749659Z", "closed_at": "2025-11-17T21:20:20.749659Z", "dependencies": []}
{"id": "trace-brxyyz", "project_id": "/Users/don.schartman/Repos/trace", "title": "Test with empty description", "description": "", "status": "closed", "priority": 2, "created_at": "2025-11-17T21:33:50.971500Z", "updated_at": "2025-11-17T21:34:00.182705Z", "closed_at": "2025-11-17T21:34:00.182705Z", "dependencies": []}
{"id": "trace-f8qgew", "project_id": "/Users/don.schartman/Repos/trace", "title": "Feedback from AI agent usage: Clarify investigation granularity and status update patterns", "description": "## Feedback from Claude AI Agent Usage of Trace\n\n### Context:\nUsed trace extensively during Flink CDC investigation (created ~14 issues, complete investigation trail from hypothesis through root cause to recommendation). Overall experience was very positive, tool worked as expected.\n\n### What Worked Well:\n1. Persistent context across investigation - updating descriptions as we learned was valuable\n2. Parent-child relationships - organized investigation logically\n3. Cross-project linking - seamless to create recommendation in different project\n4. Required descriptions - forced clarity at each step\n5. Tool behavior - all commands worked as documented, no surprises\n\n### Suggested Instruction Improvements:\n\n#### 1. Guidance on Issue Granularity During Exploration\n\nCurrent: 'Structure is fluid, not rigid' and 'if breakdown is too fine-grained, reparent issues'\n\nUnclear during active investigation:\n- Should I create an issue for EVERY hypothesis I want to test?\n- Or only for things I'm confident need tracking?\n\nDuring this investigation: Created ~10+ issues, many became obsolete within minutes as we pivoted. Worked fine but wasn't sure if this was the intended pattern.\n\nSuggested addition:\n> During exploratory investigation, it's fine to create many hypothesis issues and close them as you rule them out. This creates an audit trail of what was considered and why it was ruled out. Alternatively, you can use a single investigation issue and update its description as you learn more. Choose based on whether the audit trail of hypotheses is valuable.\n\n#### 2. When to Use --status in_progress vs Just Working\n\nCurrent: Instructions mention updating status 'in real-time' but unclear:\n- Do I mark in_progress before every task, even quick ones?\n- Or only for longer-running work?\n\nDuring investigation: Sometimes forgot to mark in_progress before starting, had to go back and update.\n\nSuggested addition:\n> For quick investigations (under 5 minutes), updating to in_progress is optional - you can go straight from open to closed. For anything longer-running, mark in_progress when you start to signal you're actively working on it. This helps if multiple agents/people are coordinating work.\n\n#### 3. Cross-Project Recommendations Pattern\n\nThis pattern worked perfectly but wasn't explicitly documented:\n- Investigate in one project/codebase\n- Create recommendation issue in different project for another team\n\nWhat happened: Investigated Flink CDC codebase (flink-cdc project), created actionable recommendation in change-capture project for EquipmentShare team to implement.\n\nSuggested addition to examples:\n> When investigating issues in one codebase that result in recommendations for another team's codebase, create the investigation issues in the code being analyzed, then create a separate recommendation issue in the team's project using --project flag. This keeps investigation details separate from actionable items.\n\n### Example Usage Pattern From This Investigation:\n\nInvestigation flow:\n1. Main issue: flink-cdc-1r1b37 (root investigation)\n2. Created child hypotheses as we explored (kwfnuj, 1ffulj, 1y9spy, etc.)\n3. Updated descriptions as findings emerged\n4. Closed hypotheses as we ruled them out or confirmed them\n5. Final: Created change-capture-t6hbdj with actionable recommendation in different project\n\nThis created excellent audit trail showing:\n- What was investigated (configuration propagation, queue behavior, threading model)\n- What was ruled out (consumer-side batching, configuration errors)\n- What was confirmed (producer thread commit overhead)\n- Actionable next step (code change recommendation)\n\n### Overall Assessment:\n\nInstructions are quite good. Suggested improvements are minor refinements to help AI agents make better judgment calls during exploratory work. Tool behavior was excellent - no bugs, worked exactly as documented.\n\n### Use Case:\nMulti-codebase investigation (Flink CDC + Debezium source code) resulting in recommendation for different team (change-capture). Trace handled this very well.", "status": "closed", "priority": 2, "created_at": "2025-11-20T21:07:01.394491Z", "updated_at": "2025-11-21T00:56:56.488493Z", "closed_at": null, "dependencies": []}
{"id": "trace-fu24tp", "project_id": "/Users/don.schartman/Repos/trace", "title": "Migrate CLI from manual argument parsing to Typer", "description": "Current implementation uses manual sys.argv parsing (~200 lines of boilerplate). This makes adding new flags error-prone and verbose. Typer would provide: automatic help generation, type validation, cleaner code, better error messages, and natural support for optional/required arguments. This refactoring would eliminate manual parsing in main() and all the while-loop flag parsing. Critical for mandatory --description (trace-nbiip2) and --project/--status flags (trace-1ak6bv). Should also make it easier to add commands like add-dependency. Migration involves: 1) Add typer dependency, 2) Convert each command to @app.command(), 3) Replace manual parsing with function signatures, 4) Ensure all tests still pass.", "status": "closed", "priority": 0, "created_at": "2025-11-17T21:12:25.121949Z", "updated_at": "2025-11-17T21:52:03.334999Z", "closed_at": "2025-11-17T21:52:03.334999Z", "dependencies": []}
{"id": "trace-jc8qak", "project_id": "/Users/don.schartman/Repos/trace", "title": "Add trc add-dependency command to link existing issues", "description": "Discovered during flag refactoring work (trace-1ak6bv): Created breakdown of tasks, then realized some should block others (e.g., docs blocked by implementation). Currently can only set dependencies during creation with --depends-on flag. No way to add blocking relationships to existing issues. Need: 'trc add-dependency <issue-id> <depends-on-id> [--type blocks|parent|related]'. Default type should be 'blocks'. This enables proper workflow ordering without recreating issues. Immediate use case: block trace-1hs8ox, trace-ryfafc, trace-rdfx3o by implementation tasks.", "status": "closed", "priority": 1, "created_at": "2025-11-17T20:10:59.980053Z", "updated_at": "2025-11-17T20:26:55.968227Z", "closed_at": "2025-11-17T20:26:55.968227Z", "dependencies": []}
{"id": "trace-jmwp5k", "project_id": "/Users/don.schartman/Repos/trace", "title": "Test with description", "description": "This should work", "status": "closed", "priority": 2, "created_at": "2025-11-17T21:33:45.854500Z", "updated_at": "2025-11-17T21:34:00.160884Z", "closed_at": "2025-11-17T21:34:00.160884Z", "dependencies": []}
{"id": "trace-ki1b46", "project_id": "/Users/don.schartman/Repos/trace", "title": "Write tests for --project any flag behavior", "description": "", "status": "closed", "priority": 2, "created_at": "2025-11-17T19:53:01.675847Z", "updated_at": "2025-11-17T23:11:05.700318Z", "closed_at": "2025-11-17T23:11:05.700318Z", "dependencies": [{"depends_on_id": "trace-1ak6bv", "type": "parent"}]}
{"id": "trace-l6n0fm", "project_id": "/Users/don.schartman/Repos/trace", "title": "Write tests for mandatory --description validation", "description": "Write tests that verify --description is required for trc create. Test should fail with clear error when --description is missing. Test should succeed with --description provided. Test should succeed with --description \"\" (empty string opt-out). Add to tests/test_cli.py. Part of mandatory description work (trace-nbiip2).", "status": "closed", "priority": 2, "created_at": "2025-11-17T20:13:34.923536Z", "updated_at": "2025-11-17T20:37:20.289177Z", "closed_at": "2025-11-17T20:37:20.289177Z", "dependencies": [{"depends_on_id": "trace-nbiip2", "type": "parent"}]}
{"id": "trace-nbiip2", "project_id": "/Users/don.schartman/Repos/trace", "title": "Make --description mandatory for trc create command", "description": "Observation: AI agents (including this session) inconsistently add descriptions when creating issues. Reviewed change-capture project: 2/5 issues had descriptions, 3/5 did not. Context loss is the biggest risk for cross-session AI workflows. Decision: Make --description mandatory for trc create to force context capture. Allow empty string (--description \"\") as explicit opt-out for edge cases. Primary users are AI agents working across sessions - they can easily provide context, and it's critical for continuity. Add clear error message if missing, guiding users to provide description or use empty string.", "status": "closed", "priority": 1, "created_at": "2025-11-17T20:11:10.775665Z", "updated_at": "2025-11-17T21:27:36.634812Z", "closed_at": "2025-11-17T21:27:36.634812Z", "dependencies": []}
{"id": "trace-rdfx3o", "project_id": "/Users/don.schartman/Repos/trace", "title": "Update trc guide command output with new flags", "description": "", "status": "closed", "priority": 2, "created_at": "2025-11-17T19:53:03.669896Z", "updated_at": "2025-11-17T23:11:05.851040Z", "closed_at": "2025-11-17T23:11:05.851040Z", "dependencies": [{"depends_on_id": "trace-1ak6bv", "type": "parent"}, {"depends_on_id": "trace-ryfafc", "type": "related"}]}
{"id": "trace-ryfafc", "project_id": "/Users/don.schartman/Repos/trace", "title": "Update all documentation with new flag usage", "description": "", "status": "closed", "priority": 2, "created_at": "2025-11-17T19:53:03.270493Z", "updated_at": "2025-11-17T23:11:05.800779Z", "closed_at": "2025-11-17T23:11:05.800779Z", "dependencies": [{"depends_on_id": "trace-1ak6bv", "type": "parent"}, {"depends_on_id": "trace-7fpjn5", "type": "blocks"}]}
{"id": "trace-udu2id", "project_id": "/Users/don.schartman/Repos/trace", "title": "CLI: Add validate command to check for structural issues", "description": "**Problem:** No way to proactively detect structural problems in issue relationships.\n\n**Proposed command:**\n```bash\ntrc validate [--fix]\n```\n\n**Checks to implement:**\n\n1. **Dual-parent relationships**\n   - Flag issues with multiple parents\n   - Suggest which parent to keep\n\n2. **Orphaned issues**\n   - Find old issues with no parent, children, or dependencies\n   - Suggest closing or linking them\n\n3. **Circular dependencies**\n   - Detect A blocks B, B blocks A scenarios\n   - Report the cycle path\n\n4. **Stale investigations**\n   - Find investigations marked completed but with open children\n   - Suggest closing children or updating status\n\n5. **Broken references**\n   - Check for dependencies pointing to non-existent issues\n   - Report as data corruption\n\n**Example output:**\n```\n\u2713 No circular dependencies found\n\u26a0 2 issues with dual parents:\n  - trace-xxx has parents: trace-aaa, trace-bbb\n\u26a0 5 orphaned issues (no dependencies, >30 days old)\n  - trace-yyy: Last updated 45 days ago\n```\n\n**Optional --fix flag:** Interactively resolve issues with user prompts.", "status": "closed", "priority": 2, "created_at": "2025-11-20T21:59:38.315351Z", "updated_at": "2025-11-21T00:56:56.268817Z", "closed_at": null, "dependencies": [{"depends_on_id": "trace-1gbj2x", "type": "parent"}]}
{"id": "trace-yu78qb", "project_id": "/Users/don.schartman/Repos/trace", "title": "Add --status any/open/closed support to list and ready commands", "description": "", "status": "closed", "priority": 2, "created_at": "2025-11-17T19:53:02.874218Z", "updated_at": "2025-11-17T19:55:39.623445Z", "closed_at": "2025-11-17T19:55:39.623445Z", "dependencies": [{"depends_on_id": "trace-1ak6bv", "type": "parent"}]}
{"id": "trace-zrxavy", "project_id": "/Users/don.schartman/Repos/trace", "title": "Add command to add dependencies to existing issues", "description": "", "status": "closed", "priority": 1, "created_at": "2025-11-17T20:02:04.359767Z", "updated_at": "2025-11-17T20:10:47.998646Z", "closed_at": "2025-11-17T20:10:47.998646Z", "dependencies": []}
{"id": "trace-11efq1", "project_id": "/Users/don/Repos/trace", "title": "Update documentation for new list default behavior", "description": "Update all documentation to reflect that trc list now defaults to showing backlog (open, in_progress, blocked) and supports multiple --status flags. Need to update CLI design docs, quickstart guide, AI agent guide, and any other relevant docs.", "status": "closed", "priority": 2, "created_at": "2025-11-18T14:25:23.236754Z", "updated_at": "2025-11-18T14:30:31.681839Z", "closed_at": "2025-11-18T14:30:31.681839Z", "dependencies": []}
{"id": "trace-12b0cz", "project_id": "/Users/don/Repos/trace", "title": "Update trc guide command output", "description": "Update the guide() function in trc_main.py (lines 1863-1936) to reflect new list behavior in the AI agent integration guide text.", "status": "closed", "priority": 2, "created_at": "2025-11-18T14:25:42.862278Z", "updated_at": "2025-11-18T14:29:28.482419Z", "closed_at": "2025-11-18T14:29:28.482419Z", "dependencies": [{"depends_on_id": "trace-11efq1", "type": "parent"}]}
{"id": "trace-133mzu", "project_id": "/Users/don/Repos/trace", "title": "Update cli-design.md for new list behavior", "description": "Update docs/cli-design.md to document: (1) trc list now defaults to backlog [open, in_progress, blocked], (2) --status flag can be specified multiple times, (3) --status any shows all statuses including closed. Update command reference and examples.", "status": "closed", "priority": 2, "created_at": "2025-11-18T14:25:42.502325Z", "updated_at": "2025-11-18T14:28:28.440485Z", "closed_at": "2025-11-18T14:28:28.440485Z", "dependencies": [{"depends_on_id": "trace-11efq1", "type": "parent"}]}
{"id": "trace-15iqup", "project_id": "/Users/don/Repos/trace", "title": "Add batch close operation for multiple issues", "description": "Support closing multiple issues in one command: trc close ID1 ID2 ID3. Currently must close one at a time which is tedious for AI agents completing multiple tasks.", "status": "open", "priority": 1, "created_at": "2025-11-30T15:31:07.600401Z", "updated_at": "2025-11-30T15:31:07.600401Z", "closed_at": null, "dependencies": [{"depends_on_id": "trace-64rf5b", "type": "parent"}]}
{"id": "trace-16so9a", "project_id": "/Users/don/Repos/trace", "title": "Fix transaction safety for DB and JSONL writes", "description": "BUG: Partial writes to global DB even when JSONL fails. Should rollback DB changes or complete both atomically. Need proper transaction handling to prevent inconsistent state.\n\nREPRODUCTION STEPS:\n1. User does NOT run 'trc init' first\n2. JSONL file (.trace/issues.jsonl) does not exist\n3. User runs 'trc create' command\n4. Issue gets created in central DB successfully\n5. JSONL export fails (because .trace directory doesn't exist)\n6. Result: DB has the issue, JSONL doesn't - data inconsistency\n\nROOT CAUSE: Commands don't check if project is initialized before modifying DB. DB writes succeed, JSONL writes fail, no rollback.\n\nFIX APPROACH:\n- Either: Check for .trace/issues.jsonl existence before DB operations\n- Or: Wrap DB + JSONL in transaction, rollback DB if JSONL fails\n- Or: Create .trace directory automatically before JSONL export\n- Best: Validate initialization upfront and fail fast with helpful error", "status": "open", "priority": 0, "created_at": "2025-11-30T15:31:07.903057Z", "updated_at": "2025-11-30T15:32:18.875227Z", "closed_at": null, "dependencies": [{"depends_on_id": "trace-64rf5b", "type": "parent"}]}
{"id": "trace-17tmdu", "project_id": "/Users/don/Repos/trace", "title": "Update CLAUDE.md default behaviors section", "description": "Update CLAUDE.md 'Default Behaviors' section to document new trc list behavior. Update the bullet point about trc list to clarify backlog default and multi-status support.", "status": "closed", "priority": 2, "created_at": "2025-11-18T14:25:43.109955Z", "updated_at": "2025-11-18T14:29:49.719341Z", "closed_at": "2025-11-18T14:29:49.719341Z", "dependencies": [{"depends_on_id": "trace-11efq1", "type": "parent"}]}
{"id": "trace-17xlxu", "project_id": "/Users/don/Repos/trace", "title": "Add --project flag to 'trc create' command", "description": "The 'trc create' command doesn't have a --project flag to specify which project an issue should be created in. Currently users must either cd to the project directory or create the issue and then use 'trc move'. Expected usage: 'trc create \"title\" --description \"...\" --project /path/to/project' or 'trc create \"title\" --description \"...\" --project project-name'. This would streamline cross-project issue creation. Discovered when trying to create trace documentation issue from knowledge-organization-framework project.", "status": "closed", "priority": 2, "created_at": "2025-11-18T02:10:40.218011Z", "updated_at": "2025-11-18T02:48:34.383288Z", "closed_at": "2025-11-18T02:48:34.383288Z", "dependencies": []}
{"id": "trace-197nsf", "project_id": "/Users/don/Repos/trace", "title": "Add priority text values (high/critical/low)", "description": "Nice-to-have: Accept both numeric (0-4) and text values (critical/high/normal/low/backlog) for priority. More intuitive for users than remembering numeric mapping.", "status": "open", "priority": 3, "created_at": "2025-11-30T15:31:08.213192Z", "updated_at": "2025-11-30T15:31:08.213192Z", "closed_at": null, "dependencies": [{"depends_on_id": "trace-64rf5b", "type": "parent"}]}
{"id": "trace-1d5uth", "project_id": "/Users/don/Repos/trace", "title": "Fix trc list to show backlog by default (exclude closed)", "description": "Currently trc list with no --status flag shows ALL issues including closed. Should default to showing backlog: open + in_progress + blocked (everything except closed).\n\nImplementation approach:\n1. Update list_issues() to support multiple statuses (accept Optional[str | list[str]] and use SQL IN clause)\n2. Update list CLI command to accept multiple --status flags (e.g., trc list --status open --status in_progress)\n3. Default behavior when no --status provided: show ['open', 'in_progress', 'blocked']\n4. Keep --status any to mean 'show all statuses'\n5. Write tests for multi-status behavior\n6. Verify all existing tests still pass\n\nThis aligns with mental model: trc list = backlog, trc ready = actionable work, trc list --status closed = done.", "status": "closed", "priority": 2, "created_at": "2025-11-18T14:13:29.742968Z", "updated_at": "2025-11-18T14:23:56.206121Z", "closed_at": "2025-11-18T14:23:56.206121Z", "dependencies": []}
{"id": "trace-1f62s8", "project_id": "/Users/don/Repos/trace", "title": "Update ai-agent-guide.md for new list behavior", "description": "Update docs/ai-agent-guide.md to document new list defaults and multi-status support. Ensure AI agents understand: trc list = backlog, trc list --status any = everything, multiple --status flags supported.", "status": "closed", "priority": 2, "created_at": "2025-11-18T14:25:42.740467Z", "updated_at": "2025-11-18T14:30:31.569158Z", "closed_at": "2025-11-18T14:30:31.569158Z", "dependencies": [{"depends_on_id": "trace-11efq1", "type": "parent"}]}
{"id": "trace-1j0gin", "project_id": "/Users/don/Repos/trace", "title": "Add or document dependency removal command", "description": "Nice-to-have: Need trc remove-dependency command (may exist but not documented in guide). Currently no clear way to remove dependencies between issues.", "status": "open", "priority": 3, "created_at": "2025-11-30T15:31:08.694986Z", "updated_at": "2025-11-30T15:31:08.694986Z", "closed_at": null, "dependencies": [{"depends_on_id": "trace-64rf5b", "type": "parent"}]}
{"id": "trace-1lz9ob", "project_id": "/Users/don/Repos/trace", "title": "Review and clean up README content", "description": "Review the README and clean up lines that could be improved. Some sections may be verbose or unclear. Focus on making it more concise and reader-friendly.", "status": "closed", "priority": 2, "created_at": "2025-11-18T02:20:08.820766Z", "updated_at": "2025-11-18T02:26:24.583140Z", "closed_at": "2025-11-18T02:26:24.583140Z", "dependencies": []}
{"id": "trace-1m3w81", "project_id": "/Users/don/Repos/trace", "title": "Show dependencies and dependents in tree view", "description": "Nice-to-have: Enhance tree view to show both dependencies (what this depends on) and dependents (what depends on this). Helps visualize full impact of changes.", "status": "open", "priority": 3, "created_at": "2025-11-30T15:31:08.376428Z", "updated_at": "2025-11-30T15:31:08.376428Z", "closed_at": null, "dependencies": [{"depends_on_id": "trace-64rf5b", "type": "parent"}]}
{"id": "trace-1mmpb4", "project_id": "/Users/don/Repos/trace", "title": "Update quickstart.md for new list behavior", "description": "Update docs/quickstart.md to reflect new default behavior in getting started examples. Ensure examples show backlog by default, mention --status closed for viewing completed work.", "status": "closed", "priority": 2, "created_at": "2025-11-18T14:25:42.620415Z", "updated_at": "2025-11-18T14:28:55.421103Z", "closed_at": "2025-11-18T14:28:55.421103Z", "dependencies": [{"depends_on_id": "trace-11efq1", "type": "parent"}]}
{"id": "trace-1pgw17", "project_id": "/Users/don/Repos/trace", "title": "Verify all existing tests pass", "description": "Run full test suite to ensure no regressions from multi-status changes", "status": "closed", "priority": 2, "created_at": "2025-11-18T14:20:23.516157Z", "updated_at": "2025-11-18T14:23:56.102152Z", "closed_at": "2025-11-18T14:23:56.102152Z", "dependencies": [{"depends_on_id": "trace-1d5uth", "type": "parent"}]}
{"id": "trace-1tlb0r", "project_id": "/Users/don/Repos/trace", "title": "Add 'trc update' command to guide documentation", "description": "The 'trc guide' output doesn't mention the 'trc update' command, which allows updating title, description, priority, and status of existing issues. Users may not discover this capability and resort to closing/recreating issues instead. Add to guide: 'trc update <id> --title \"...\" --description \"...\" --priority N --status X - Update existing issue'. Discovered when AI agent tried to close/recreate instead of updating issue knowledge-organization-framework-4apcmt to add Morality to scope.", "status": "closed", "priority": 2, "created_at": "2025-11-18T02:06:27.741217Z", "updated_at": "2025-11-18T02:30:27.242997Z", "closed_at": "2025-11-18T02:30:27.242997Z", "dependencies": []}
{"id": "trace-1toxy1", "project_id": "/Users/don/Repos/trace", "title": "Fix --project flag not filtering correctly", "description": "BUG: trc list --project trace shows wrong project. When run from ynab-budget directory, shows ynab-budget issues instead of trace issues. But 'trc list --project any | grep trace-' works correctly. --project flag not filtering as expected.", "status": "open", "priority": 0, "created_at": "2025-11-30T15:31:08.058240Z", "updated_at": "2025-11-30T15:31:08.058240Z", "closed_at": null, "dependencies": [{"depends_on_id": "trace-64rf5b", "type": "parent"}]}
{"id": "trace-1vaoox", "project_id": "/Users/don/Repos/trace", "title": "Test cross-project creation", "description": "Testing --project flag from outside trace repo", "status": "closed", "priority": 2, "created_at": "2025-11-18T02:49:04.759579Z", "updated_at": "2025-11-18T02:49:12.492233Z", "closed_at": "2025-11-18T02:49:12.492233Z", "dependencies": []}
{"id": "trace-1xm9bv", "project_id": "/Users/don/Repos/trace", "title": "Clarify TodoWrite vs trace usage in CLAUDE.md", "description": "Add explicit override guidance to CLAUDE.md: TodoWrite's general instructions suggest using it for 'complex multi-step tasks', but this project uses trace for all non-trivial work. Make it clear that TodoWrite is ONLY for trivial, single-session work. Anything involving multiple files, tests, or spanning sessions should use trace.", "status": "closed", "priority": 2, "created_at": "2025-11-18T14:20:39.188540Z", "updated_at": "2025-11-18T14:32:32.025487Z", "closed_at": "2025-11-18T14:32:32.025487Z", "dependencies": []}
{"id": "trace-1ympls", "project_id": "/Users/don/Repos/trace", "title": "Update list_issues() to support multiple statuses", "description": "Modify list_issues() function to accept status: Optional[str | list[str]]. When given a list, use SQL IN clause. When given 'any' or None for all statuses, use no filter.", "status": "closed", "priority": 2, "created_at": "2025-11-18T14:20:23.178832Z", "updated_at": "2025-11-18T14:23:14.049583Z", "closed_at": "2025-11-18T14:23:14.049583Z", "dependencies": [{"depends_on_id": "trace-1d5uth", "type": "parent"}]}
{"id": "trace-4z5w8k", "project_id": "/Users/don/Repos/trace", "title": "Update list CLI to accept multiple --status flags", "description": "Change list command to accept multiple --status flags. Default to ['open', 'in_progress', 'blocked'] when no flags provided. Handle 'any' special case.", "status": "closed", "priority": 2, "created_at": "2025-11-18T14:20:23.290139Z", "updated_at": "2025-11-18T14:23:43.292070Z", "closed_at": "2025-11-18T14:23:43.292070Z", "dependencies": [{"depends_on_id": "trace-1d5uth", "type": "parent"}]}
{"id": "trace-64rf5b", "project_id": "/Users/don/Repos/trace", "title": "UX improvements from real-world AI agent usage", "description": "Feedback from using trace with Claude Code in ynab-budget project.\n\nCRITICAL ISSUES:\n1. Better initialization errors - 'FileNotFoundError' should suggest 'trc init'. Got cryptic error when trying to create issues before init.\n2. Batch operations - Cannot close multiple issues at once. Need: trc close ID1 ID2 ID3\n3. Clearer dependency language - 'Added blocks dependency: A \u2192 B' is confusing. Reads like 'A blocks B' but means opposite. Suggest: 'A depends on B' or 'A is blocked by B'\n4. Transaction safety - Partial writes to global DB even when JSONL fails. Should rollback or complete both.\n5. BUG: trc list --project trace shows wrong project - When run from ynab-budget directory, 'trc list --project trace' shows ynab-budget issues instead of trace issues. But 'trc list --project any | grep trace-' works correctly. Seems like --project flag not filtering properly.\n\nNICE TO HAVE:\n6. Priority flexibility - Accept both numeric (4) and text (high/critical)\n7. Dependency visualization - Show both dependencies and dependents in tree view\n8. Better list filtering - Add --all, --active, --priority flags\n9. Dependency removal - trc remove-dependency command (may exist but not documented?)\n\nWHAT WORKED WELL:\n\u2705 Mandatory descriptions (brilliant for AI context)\n\u2705 trc ready command (extremely useful)\n\u2705 JSONL format (git-friendly)\n\u2705 Readable IDs (ynab-budget-1y2ul1 > UUIDs)\n\u2705 Cross-project support\n\nCONTEXT: Using trace with Claude Code to manage ynab-budget project. Tool solves real problem (AI memory across sessions). Core concept is excellent, just needs UX polish on error messages and bulk operations.\n\nOverall Grade: B+ - Would recommend despite rough edges.", "status": "open", "priority": 3, "created_at": "2025-11-30T15:27:34.273438Z", "updated_at": "2025-11-30T15:29:07.760651Z", "closed_at": null, "dependencies": []}
{"id": "trace-6zwjgn", "project_id": "/Users/don/Repos/trace", "title": "Improve init error messages to suggest trc init", "description": "When FileNotFoundError occurs (e.g., trying to create issues before init), show user-friendly error suggesting 'trc init'. Current cryptic error confuses users.", "status": "open", "priority": 1, "created_at": "2025-11-30T15:31:07.451888Z", "updated_at": "2025-11-30T15:31:07.451888Z", "closed_at": null, "dependencies": [{"depends_on_id": "trace-16so9a", "type": "related"}, {"depends_on_id": "trace-64rf5b", "type": "parent"}]}
{"id": "trace-adiu0x", "project_id": "/Users/don/Repos/trace", "title": "Write tests for multi-status list behavior", "description": "Add tests for: multiple status flags, default backlog behavior, --status any, single status flag still works, empty results handling", "status": "closed", "priority": 2, "created_at": "2025-11-18T14:20:23.402913Z", "updated_at": "2025-11-18T14:22:51.064269Z", "closed_at": "2025-11-18T14:22:51.064269Z", "dependencies": [{"depends_on_id": "trace-1d5uth", "type": "parent"}]}
{"id": "trace-cozpy3", "project_id": "/Users/don/Repos/trace", "title": "Add better list filtering options", "description": "Nice-to-have: Add convenience flags like --all (all statuses), --active (open+in_progress), --priority <level> for easier filtering without multiple --status flags.", "status": "open", "priority": 3, "created_at": "2025-11-30T15:31:08.534277Z", "updated_at": "2025-11-30T15:31:08.534277Z", "closed_at": null, "dependencies": [{"depends_on_id": "trace-64rf5b", "type": "parent"}]}
{"id": "trace-f28qjw", "project_id": "/Users/don/Repos/trace", "title": "Document uv tool install workflow in README", "description": "Add section explaining how to install trc globally using 'uv tool install .' for regular use, and 'uv tool install --editable .' for development. The editable install allows making changes to the code while having the trc command available globally.", "status": "closed", "priority": 2, "created_at": "2025-11-18T02:20:08.717939Z", "updated_at": "2025-11-18T02:22:43.240305Z", "closed_at": "2025-11-18T02:22:43.240305Z", "dependencies": []}
{"id": "trace-hbhd8g", "project_id": "/Users/don/Repos/trace", "title": "Fix confusing dependency language in output", "description": "Current: 'Added blocks dependency: A \u2192 B' reads like 'A blocks B' but means opposite (A is blocked by B). Change to clearer language like 'A depends on B' or 'A is blocked by B' to match mental model.", "status": "open", "priority": 1, "created_at": "2025-11-30T15:31:07.750863Z", "updated_at": "2025-11-30T15:31:07.750863Z", "closed_at": null, "dependencies": [{"depends_on_id": "trace-64rf5b", "type": "parent"}]}
{"id": "trace-yk4i7i", "project_id": "/Users/don/Repos/trace", "title": "Update README.md for new list behavior", "description": "Check README.md for any references to trc list behavior and update if needed. Ensure examples show the new backlog default.", "status": "closed", "priority": 2, "created_at": "2025-11-18T14:25:42.985648Z", "updated_at": "2025-11-18T14:29:59.863034Z", "closed_at": "2025-11-18T14:29:59.863034Z", "dependencies": [{"depends_on_id": "trace-11efq1", "type": "parent"}]}
